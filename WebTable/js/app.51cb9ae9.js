(function(e){function t(t){for(var o,s,r=t[0],c=t[1],a=t[2],d=0,h=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return l.push.apply(l,a||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(l.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},l=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/WebTable/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var a=0;a<r.length;a++)t(r[a]);var u=c;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0055":function(e,t,n){},"104c":function(e,t,n){"use strict";n("6f67")},"1a54":function(e,t,n){},"270c":function(e,t,n){"use strict";n("0055")},"356f":function(e,t,n){"use strict";n("e9f5")},"40ae":function(e,t,n){"use strict";n("7b2d")},4845:function(e,t,n){"use strict";n("ebd7")},"4d8b":function(e,t,n){},"4dbd":function(e,t,n){"use strict";n("c8ea")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Tools"),n("div",{staticClass:"container"},[n("Table",{style:e.tableStyle}),n("TextTableViewer")],1),n("Popup",{model:{value:e.isOverlayVisible,callback:function(t){e.isOverlayVisible=t},expression:"isOverlayVisible"}})],1)},l=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"table",staticClass:"table"},[n("div",{staticClass:"table__free-space",on:{click:e.selectAll}}),n("div",{staticClass:"table__row-headers-wrapper"},[n("div",{ref:"row_headers_scroll",staticClass:"table__scroll table__scroll-withoutScrollbar table__row-headers-scroll"},[n("div",{staticClass:"table__row-headers"},e._l(e.table.rows,(function(e,t){return n("RowHeader",{key:t,attrs:{rowid:t}})})),1)])]),n("div",{ref:"column_headers",staticClass:"table__column-headers-wrapper"},[n("div",{ref:"column_headers_scroll",staticClass:"table__scroll table__scroll-withoutScrollbar"},[n("div",{staticClass:"table__column-headers"},e._l(e.table.columns,(function(e,t){return n("ColumnHeader",{key:t,attrs:{columnid:t}})})),1)])]),n("div",{ref:"table_viewer",staticClass:"table__scroll",on:{scroll:e.contentScroll}},[n("div",{staticClass:"table__content"},e._l(e.table.rows,(function(t,o){return n("CellRow",{key:o,attrs:{rowid:o,focused:e.focused},on:{cellEditingStart:function(t){e.isCellEditing=!0},cellEditingEnd:function(t){e.isCellEditing=!1}}})})),1)])])},r=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"rowheader",staticClass:"table__header row-header",on:{mousedown:e.mousedown,mousemove:e.mousemove}},[e._v(" "+e._s(e.rowid+1)+" "),n("div",{ref:"header_resizer",staticClass:"row-header__resizer",on:{mousedown:e.resizeStart}})])},a=[],u=(n("a9e3"),n("b85c")),d=(n("a434"),n("4de4"),n("d3b7"),n("159b"),{mouseup:[],mousemove:[],mousedown:[],keydown:[],touchstart:[],touchmove:[],touchend:[],copy:[],paste:[],cut:[],selectionchanged:[],rowsizechanged:[],columnsizechanged:[],cellchanged:[],tablechanged:[],configchanged:[],openpopup:[],closepopup:[]});function h(e,t){d[e]&&d[e].push(t)}function f(e,t){d[e].filter((function(e){return e!==t}))}function m(){for(var e in d)d[e]=[]}function p(e,t){d[e].forEach((function(e){return e&&e(t)}))}document.addEventListener("mousemove",(function(e){p("mousemove",e)})),document.addEventListener("mouseup",(function(e){p("mouseup",e)})),document.addEventListener("mousedown",(function(e){p("mousedown",e)})),document.addEventListener("keydown",(function(e){p("keydown",e)})),document.addEventListener("touchstart",(function(e){p("touchstart",e)})),document.addEventListener("touchmove",(function(e){p("touchmove",e)})),document.addEventListener("touchend",(function(e){p("touchend",e)})),document.addEventListener("copy",(function(e){p("copy",e)})),document.addEventListener("paste",(function(e){p("paste",e)})),document.addEventListener("cut",(function(e){p("cut",e)})),document.addEventListener("load",(function(e){p("load",e)}));var w={on:h,off:f,clear:m,broadcast:p},v=(n("ac1f"),n("466d"),{37:1,38:1,39:1,40:1});function g(e){e.preventDefault()}function b(e){if(v[e.keyCode])return g(e),!1}var y=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){y=!0}}))}catch(Ht){}var _=!!y&&{passive:!1},C="onwheel"in document.createElement("div")?"wheel":"mousewheel";function S(e){return String.fromCharCode(65+e)}function x(e){return JSON.parse(JSON.stringify(e))}function E(e){for(var t=[0],n=1;n<=e;n++){t[0]+=1;for(var o=0;o<t.length;o++)t[o]>25&&(t.length>o+1?t[o+1]+=1:t[o+1]=0,t[o]=0)}for(var i="",l=0,s=t;l<s.length;l++){var r=s[l];i=S(r)+i}return i}function k(e){return 1===e.length&&(e.match(/\d|\w|[а-яА-Я]/i)||-1!=["_","-","+","=","!","@","#","$","%","^","&","*","(",")","|","\\","[","]","{","}",",",".","?","`","~","'",'"',":",";","<",">"].indexOf(e))}function T(e,t){var n=document.createRange();n.selectNodeContents(e),t&&n.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(n)}function O(e){e.addEventListener("DOMMouseScroll",g,!1),e.addEventListener(C,g,_),e.addEventListener("touchmove",g,_),e.addEventListener("keydown",b,!1)}function $(e){e.removeEventListener("DOMMouseScroll",g,!1),e.removeEventListener(C,g,_),e.removeEventListener("touchmove",g,_),e.removeEventListener("keydown",b,!1)}function z(e,t){while(-1==t.indexOf(e)&&e)e=e.parentElement;return!!e}var R=[],D={},j=!1,P={default:{row:{height:20},column:{width:100}},rows:[],columns:[],cells:[]},L=-1,M=-1,N=-1,V=-1,B=null;function A(){w.on("tablechanged",q),w.on("mousemove",ee),w.on("touchmove",ee),w.on("mouseup",te),w.on("touchend",te),w.on("touchmove",ie);var e=localStorage.getItem("table");if(e)e=JSON.parse(e),w.broadcast("tablechanged",{table:e});else{for(var t=0;t<50;t++)P.rows.push(x(P.default.row));for(var n=0;n<50;n++)P.columns.push(x(P.default.column))}w.on("tablechanged",F),w.on("cellchanged",F),w.on("rowsizechanged",F),w.on("columnsizechanged",F)}function J(e){B=e}function K(){return B}function q(e){P.default=e.table.default,P.rows=e.table.rows,P.columns=e.table.columns,P.cells=e.table.cells;for(var t=0;t<P.rows.length;t++)w.broadcast("rowsizechanged",{row:t,value:P.rows[t].height});for(var n=0;n<P.columns.length;n++)w.broadcast("columnsizechanged",{column:n,value:P.columns[n].width})}function F(){localStorage.setItem("table",JSON.stringify(P))}function U(){var e,t=Object(u["a"])(re());try{for(t.s();!(e=t.n()).done;){var n=e.value;H(n.row,n.column,{content:null})}}catch(o){t.e(o)}finally{t.f()}}function H(e,t,n){P.cells[e][t]=n,w.broadcast("cellchanged",{row:e,column:t,value:n})}function I(e,t){return P.cells[e]&&P.cells[e][t]||(P.cells[e]||(P.cells[e]=[]),P.cells[e][t]={content:null}),P.cells[e][t]}function X(e){P.rows.splice(e,0,x(P.default.row)),P.cells.splice(e,0,[]),w.broadcast("cellchanged",{predicate:function(t,n){return t>=e}});for(var t=e;t<P.rows.length;t++)w.broadcast("rowsizechanged",{row:t,value:P.rows[t].height})}function Y(e){P.rows=P.rows.filter((function(t,n){return n!=e})),P.cells=P.cells.filter((function(t,n){return n!=e})),w.broadcast("cellchanged",{predicate:function(t,n){return t>=e}});for(var t=e;t<P.rows.length;t++)w.broadcast("rowsizechanged",{row:t,value:P.rows[t].height})}function W(e){P.columns.splice(e,0,x(P.default.column));for(var t=0;t<P.rows.length;t++)P.cells[t].splice(e,0,{content:null});w.broadcast("cellchanged",{predicate:function(t,n){return n>=e}});for(var n=e;n<P.columns.length;n++)w.broadcast("columnsizechanged",{column:n,value:P.columns[n].width})}function G(e){P.columns=P.columns.filter((function(t,n){return n!=e}));for(var t=0;t<P.rows.length;t++)P.cells[t]=P.cells[t].filter((function(t,n){return n!=e}));w.broadcast("cellchanged",{predicate:function(t,n){return n>=e}});for(var n=e;n<P.columns.length;n++)w.broadcast("columnsizechanged",{column:n,value:P.columns[n].width})}function Q(e,t){L=e,M=t.target.parentElement.getBoundingClientRect().top}function Z(e,t){N=e,V=t.target.parentElement.getBoundingClientRect().left}function ee(e){if(-1!=L){var t=(e.clientY?e.clientY:e.touches[0].clientY)-M;t>5&&(P.rows[L].height=t),w.broadcast("rowsizechanged",{row:L,value:t})}if(-1!=N){var n=(e.clientX?e.clientX:e.touches[0].clientX)-V;n>5&&(P.columns[N].width=n),w.broadcast("columnsizechanged",{column:N,value:n})}}function te(e){L=-1,N=-1,j=!1}function ne(e){if(-1==L&&-1==N){if(e.ev.shiftKey)return e.move=!0,void oe(e);j=!0,e.ev.ctrlKey||e.ev.shiftKey||le(),R.push({row:e.row,column:e.column}),e.index=R.length,D.start=e,w.broadcast("selectionchanged",null)}}function oe(e){if(j||e.move){D.end=e;var t=Math.min(D.start.row,e.row),n=Math.max(D.start.row,e.row),o=Math.min(D.start.column,e.column),i=Math.max(D.start.column,e.column);le(D.start.index),t==n&&0==o&&i==P.columns.length-1?R.push({row:t}):o==i&&0==t&&n==P.rows.length-1?R.push({column:o}):R.push({startRow:t,endRow:n,startColumn:o,endColumn:i}),w.broadcast("selectionchanged",null)}}function ie(e){var t=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);t&&j&&(t=t.__vue__,t&&("Cell"==t.$options._componentTag?oe({row:t.rowid,column:t.columnid,ev:e}):"RowHeader"==t.$options._componentTag?oe({row:t.rowid,column:P.columns.length-1,ev:e}):"ColumnHeader"==t.$options._componentTag&&oe({row:P.rows.length-1,column:t.columnid,ev:e})))}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];while(R.length>e)R.pop();1==t&&w.broadcast("selectionchanged",null)}function se(){le(),ne({row:0,column:0,ev:{}}),R.push(null),j=!1,w.broadcast("selectionchanged",null)}function re(){var e,t=D.start,n=[],o=Object(u["a"])(R);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(null==i){for(var l=0;l<P.rows.length;l++)for(var s=0;s<P.columns.length;s++)n.push({row:l,column:s});break}if(void 0==i.column&&i.row==t.row)for(var r=0;r<P.columns.length;r++)n.push({row:t.row,column:r});else if(void 0==i.row&&i.column==t.column)for(var c=0;c<P.rows.length;c++)n.push({row:c,column:t.column});else if(void 0!=i.row&&void 0!=i.column)n.push({row:i.row,column:i.column});else for(var a=i.startRow;a<=i.endRow;a++)for(var d=i.startColumn;d<=i.endColumn;d++)n.push({row:a,column:d})}}catch(h){o.e(h)}finally{o.f()}return n}var ce={value:null,__value:null};function ae(e,t,n,o){P.cells[t][n]&&o.cells.push({row:t-e.row,column:n-e.column,cell:P.cells[t][n]})}function ue(){var e,t={cells:[]},n=D.start,o=Object(u["a"])(re());try{for(o.s();!(e=o.n()).done;){var i=e.value;ae(n,i.row,i.column,t)}}catch(l){o.e(l)}finally{o.f()}return t}function de(){ce.value=JSON.stringify(ue())}function he(e,t,n,o){while(P.rows.length<=e.row+t)P.rows.push(x(P.default.row));while(P.columns.length<=e.column+n)P.columns.push(x(P.default.column));P.cells[e.row+t]||(P.cells[e.row+t]=[]),H(e.row+t,e.column+n,o),R.push({row:e.row+t,column:e.column+n})}function fe(e){if(D.start&&e&&e.cells){le(0);var t,n=Object(u["a"])(e.cells);try{for(n.s();!(t=n.n()).done;){var o=t.value;he(D.start,o.row,o.column,o.cell)}}catch(i){n.e(i)}finally{n.f()}w.broadcast("selectionchanged",null)}}function me(){ce.value.then((function(e){fe(JSON.parse(e))}))}function pe(){de(),U()}navigator.clipboard?Object.defineProperty(ce,"value",{get:function(){return navigator.clipboard.readText()},set:function(e){navigator.clipboard.writeText(e).then(null,(function(){console.log("clipboard write failed")}))}}):Object.defineProperty(ce,"value",{get:function(){return new Promise((function(e,t){return e(ce.__value)}))},set:function(e){ce.__value=e}});var we={setViewer:J,getViewer:K,init:A,clearSelected:U,getCell:I,setCell:H,addRow:X,deleteRow:Y,addColumn:W,deleteColumn:G,rowResizeStart:Q,columnResizeStart:Z,resizeMove:ee,resizeEnd:te,selectionStart:ne,selectionMove:oe,clearSelection:le,selectAll:se,getSelectedCells:re,getCopyObj:ue,pasteFromObj:fe,copy:de,paste:me,cut:pe},ve={props:{rowid:{type:Number,required:!0}},methods:{mousedown:function(e){we.selectionStart({row:this.rowid,column:e.shiftKey?P.columns.length-1:0,ev:e}),we.selectionMove({row:this.rowid,column:P.columns.length-1,ev:e})},mousemove:function(e){we.selectionMove({row:this.rowid,column:P.columns.length-1,ev:e})},resizeStart:function(e){we.rowResizeStart(this.rowid,e)},rowsizechanged:function(e){e.row==this.rowid&&this.$refs.rowheader&&(this.$refs.rowheader.style.height=e.value+"px")}},created:function(){w.on("rowsizechanged",this.rowsizechanged)},mounted:function(){this.rowsizechanged({row:this.rowid,value:P.rows[this.rowid].height}),this.$refs.rowheader.addEventListener("touchstart",this.mousedown),this.$refs.header_resizer.addEventListener("touchstart",this.resizeStart)}},ge=ve,be=(n("4845"),n("2877")),ye=Object(be["a"])(ge,c,a,!1,null,"144af70f",null),_e=ye.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"columnheader",staticClass:"table__header column-header",on:{mousedown:e.mousedown,mousemove:e.mousemove}},[e._v(" "+e._s(e.numToLetters(e.columnid))+" "),n("div",{ref:"header_resizer",staticClass:"column-header__resizer",on:{mousedown:e.resizeStart}})])},Se=[],xe={props:{columnid:{type:Number,required:!0}},methods:{numToLetters:E,mousedown:function(e){we.selectionStart({row:e.shiftKey?P.rows.length-1:0,column:this.columnid,ev:e}),we.selectionMove({row:P.rows.length-1,column:this.columnid,ev:e})},mousemove:function(e){we.selectionMove({row:P.rows.length-1,column:this.columnid,ev:e})},resizeStart:function(e){we.columnResizeStart(this.columnid,e)},columnsizechanged:function(e){e.column==this.columnid&&this.$refs.columnheader&&(this.$refs.columnheader.style.width=e.value+"px")}},created:function(){w.on("columnsizechanged",this.columnsizechanged)},mounted:function(){this.columnsizechanged({column:this.columnid,value:P.columns[this.columnid].width}),this.$refs.columnheader.addEventListener("touchstart",this.mousedown),this.$refs.header_resizer.addEventListener("touchstart",this.resizeStart)}},Ee=xe,ke=(n("270c"),Object(be["a"])(Ee,Ce,Se,!1,null,"169104c3",null)),Te=ke.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"cellrow",staticClass:"wrapper"},e._l(e.table.columns,(function(t,o){return n("div",{key:o,staticClass:"cellrow"},[n("Cell",{attrs:{rowid:e.rowid,columnid:o,focused:e.focused},on:{cellEditingStart:function(t){return e.$emit("cellEditingStart",t)},cellEditingEnd:function(t){return e.$emit("cellEditingEnd",t)}}})],1)})),0)},$e=[],ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"editor",staticClass:"cell",class:{"cell-editing":e.isEditing},attrs:{contenteditable:e.isEditing,autofocus:""},domProps:{textContent:e._s(e.content)},on:{keydown:e.onKeyPress,blur:e.onUnfocus,dblclick:function(t){return e.onFocus(!1)},mousedown:e.onMouseDown,mousemove:e.onMouseMove}})},Re=[],De={props:{rowid:{type:Number,required:!0},columnid:{type:Number,required:!0},focused:{type:Boolean,required:!0}},data:function(){return{isEditing:!1,content:null,isTouchEnd:!1}},methods:{onMouseDown:function(e){this.isEditing||we.selectionStart({row:this.rowid,column:this.columnid,ev:e})},onMouseMove:function(e){we.selectionMove({row:this.rowid,column:this.columnid,ev:e})},onTouchStart:function(e){var t=this;this.isTouchEnd=!1;var n={top:we.getViewer().scrollTop,left:we.getViewer().scrollLeft};setTimeout((function(){var o=we.getViewer().scrollTop,i=we.getViewer().scrollLeft;1!=t.isTouchEnd&&n.top+10>=o&&n.top-10<=o&&n.left+10>=i&&n.left-10<=i&&(O(we.getViewer()),t.onMouseDown(e))}),500)},onTouchEnd:function(e){this.isTouchEnd=!0,$(we.getViewer())},onFocus:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isEditing=!0,R.unshift({row:this.rowid,column:this.columnid}),we.clearSelection(1,!0),this.$emit("cellEditingStart",{row:this.rowid,column:this.columnid}),setTimeout((function(){e.$refs.editor.focus(),T(e.$refs.editor,t)}),10)},onUnfocus:function(e){this.updateContent(),this.$emit("cellEditingEnd",{row:this.rowid,column:this.columnid}),this.isEditing=!1},onKeyPress:function(e){if("Enter"===e.code&&!e.shiftKey)return e.preventDefault(),this.updateContent(),void(this.isEditing=!1)},getCell:function(){return we.getCell(this.rowid,this.columnid)},globalKeyPress:function(e){this.focused&&!e.ctrlKey&&k(e.key)&&!this.isEditing&&this.isSelected(this.rowid,this.columnid)&&this.isStartCell()&&(this.content=this.content?this.content+e.key:e.key,this.onFocus(!0))},updateContent:function(){this.content=this.$refs.editor.innerText,this.getCell().content=this.content,w.broadcast("cellchanged",{})},isStartCell:function(){return D.start.row==this.rowid&&D.start.column==this.columnid},isSelected:function(e,t){if(e<0||e>=P.rows.length||t<0||t>=P.columns.length)return!1;var n,o=Object(u["a"])(R);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(null==i)return!0;if(void 0==i.column&&i.row==e)return!0;if(void 0==i.row&&i.column==t)return!0;if(i.row==e&&i.column==t)return!0;if(i.startColumn<=t&&i.endColumn>=t&&i.startRow<=e&&i.endRow>=e)return!0}}catch(l){o.e(l)}finally{o.f()}return!1},onSelectionSelectionChanged:function(){if(this.$refs.editor){if(!this.isSelected(this.rowid,this.columnid))return this.$refs.editor.style.border=null,this.$refs.editor.style.boxSizing=null,void(this.$refs.editor.style.background=null);this.$refs.editor.style.boxSizing="border-box";var e="2px solid green";this.isSelected(this.rowid-1,this.columnid)?this.$refs.editor.style.borderTop=null:this.$refs.editor.style.borderTop=e,this.isSelected(this.rowid,this.columnid+1)?this.$refs.editor.style.borderRight=null:this.$refs.editor.style.borderRight=e,this.isSelected(this.rowid+1,this.columnid)?this.$refs.editor.style.borderBottom=null:this.$refs.editor.style.borderBottom=e,this.isSelected(this.rowid,this.columnid-1)?this.$refs.editor.style.borderLeft=null:this.$refs.editor.style.borderLeft=e,this.isStartCell()?this.$refs.editor.style.background=null:this.$refs.editor.style.background="lightgrey"}},columnsizechanged:function(e){e.column==this.columnid&&this.$refs.editor&&(this.$refs.editor.style.width=e.value+"px")},cellchanged:function(e){(e.row==this.rowid&&e.column==this.columnid||void 0!=e.predicate&&e.predicate(this.rowid,this.columnid))&&(this.content=e.value?e.value.content:this.getCell().content)},tablechanged:function(e){this.content=this.getCell().content}},created:function(){w.on("columnsizechanged",this.columnsizechanged),w.on("keydown",this.globalKeyPress),w.on("selectionchanged",this.onSelectionSelectionChanged),w.on("cellchanged",this.cellchanged),w.on("tablechanged",this.tablechanged)},mounted:function(){this.columnsizechanged({column:this.columnid,value:P.columns[this.columnid].width}),this.content=this.getCell().content,this.onSelectionSelectionChanged(),this.$refs.editor.addEventListener("touchstart",this.onTouchStart),this.$refs.editor.addEventListener("touchend",this.onTouchEnd)}},je=De,Pe=(n("fb0a"),Object(be["a"])(je,ze,Re,!1,null,"5077605d",null)),Le=Pe.exports,Me={components:{Cell:Le},props:{rowid:{type:Number,required:!0},focused:{type:Boolean,required:!0}},data:function(){return{table:P}},methods:{rowsizechanged:function(e){e.row==this.rowid&&this.$refs.cellrow&&(this.$refs.cellrow.style.height=e.value+"px")}},created:function(){w.on("rowsizechanged",this.rowsizechanged)},mounted:function(){this.rowsizechanged({row:this.rowid,value:P.rows[this.rowid].height})}},Ne=Me,Ve=(n("356f"),Object(be["a"])(Ne,Oe,$e,!1,null,"3a4c9e48",null)),Be=Ve.exports,Ae={components:{RowHeader:_e,ColumnHeader:Te,CellRow:Be},data:function(){return{focused:!0,isCellEditing:!1,table:P}},methods:{selectAll:we.selectAll,contentScroll:function(e){this.$refs.column_headers_scroll.scrollTo(e.target.scrollLeft,0),this.$refs.row_headers_scroll.scrollTo(0,e.target.scrollTop)},keyPress:function(e){this.focused&&(e.ctrlKey&&"KeyA"==e.code?we.selectAll():"Delete"==e.code&&we.clearSelected())},globalMouseUp:function(e){this.focused=z(e.target,[this.$refs.table])},handleCopy:function(e){this.focused&&!this.isCellEditing&&(e.preventDefault(),e.clipboardData.setData("text/plain",JSON.stringify(we.getCopyObj())))},handlePaste:function(e){this.focused&&!this.isCellEditing&&(e.preventDefault(),we.pasteFromObj(JSON.parse(e.clipboardData.getData("text/plain"))))},handleCut:function(e){this.focused&&!this.isCellEditing&&(this.handleCopy(e),we.clearSelected())}},created:function(){w.on("keydown",this.keyPress),w.on("mouseup",this.globalMouseUp),w.on("copy",this.handleCopy),w.on("paste",this.handlePaste),w.on("cut",this.handleCut)},mounted:function(){O(this.$refs.column_headers_scroll),O(this.$refs.row_headers_scroll),we.setViewer(this.$refs.table_viewer)}},Je=Ae,Ke=(n("104c"),Object(be["a"])(Je,s,r,!1,null,"a0772e6c",null)),qe=Ke.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowed,expression:"isShowed"}],staticClass:"texttable"},[n("div",{staticClass:"texttable__wrapper",style:{"font-size":e.fontSize+"px"}},[n("div",{ref:"content",staticClass:"texttable__content"},[e._v(e._s(e.content))])]),n("div",{staticClass:"texttable__container"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedBorderType,expression:"selectedBorderType"}],staticClass:"texttable__select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedBorderType=t.target.multiple?n:n[0]}}},e._l(e.borderTypes,(function(t,o){return n("option",{key:o,domProps:{value:t}},[e._v(e._s(t))])})),0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fontSize,expression:"fontSize"}],attrs:{type:"range",min:"1",max:"20"},domProps:{value:e.fontSize},on:{__r:function(t){e.fontSize=t.target.value}}})]),n("div",{staticClass:"texttable__container"},[n("div",{staticClass:"texttable__checkbox checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.useSelect,expression:"useSelect"}],attrs:{type:"checkbox",name:"useSelect"},domProps:{checked:Array.isArray(e.useSelect)?e._i(e.useSelect,null)>-1:e.useSelect},on:{change:function(t){var n=e.useSelect,o=t.target,i=!!o.checked;if(Array.isArray(n)){var l=null,s=e._i(n,l);o.checked?s<0&&(e.useSelect=n.concat([l])):s>-1&&(e.useSelect=n.slice(0,s).concat(n.slice(s+1)))}else e.useSelect=i}}}),n("label",{staticClass:"texttable__label",attrs:{for:"useSelect"}},[e._v("Use select")])]),n("div",{staticClass:"texttable__button button",on:{click:e.copy}},[e._v("Copy")]),n("div",{staticClass:"texttable__button button",on:{click:e.update}},[e._v("Update table")])])])},Ue=[],He="\n";function Ie(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="";function i(e,t){for(var n=0;n<e;n++)o+=t}if(1==n){if(t={startRow:R[0].row,endRow:R[0].row,startColumn:R[0].column,endColumn:R[0].column},R.length>=2){var l=R[1];t=null==l?{startRow:0,endRow:P.rows.length-1,startColumn:0,endColumn:P.columns.length-1}:void 0==l.column&&void 0!=l.row?{startRow:l.row,endRow:l.row,startColumn:0,endColumn:P.columns.length-1}:void 0==l.row&&void 0!=l.column?{startRow:0,endRow:P.rows.length-1,startColumn:l.column,endColumn:l.column}:void 0!=l.row&&void 0!=l.column?{startRow:l.row,endRow:l.row,startColumn:l.column,endColumn:l.column}:l}}else t={startRow:0,endRow:P.rows.length-1,startColumn:0,endColumn:P.columns.length-1};for(var s=t.startRow;s<=t.endRow;s++){P.rows[s];for(var r=[],c=t.startColumn;c<=t.endColumn;c++){var a=P.columns[c],d=a.width/6.5,h=[],f=we.getCell(s,c);if(f.content){for(var m=[],p=0,w=0;w<f.content.length;w++){var v=f.content[w];m[p]||(m[p]="")," "==v||"\n"==v?m[p++]+=v:m[p]+=v}for(var g=0,b=0;b<m.length;b++){var y=m[b];if(y.length>d||-1!=y.indexOf("\n")){h[g]||(h[g]=""),-1!=y.indexOf("\n")&&(h[g]+y).length>d&&g++;var _,C=Object(u["a"])(y);try{for(C.s();!(_=C.n()).done;){var S=_.value;"\n"==S&&(h[++g]="\n",g++),h[g]||(h[g]=""),h[g].length>d&&g++,h[g]||(h[g]=""),"\n"!=S&&(h[g]+=S)}}catch(q){C.e(q)}finally{C.f()}}else h[g]||(h[g]=""),(h[g]+y).length>d&&g++,h[g]||(h[g]=""),h[g]+=y}}var x=[],E=0;c==t.endColumn?s==t.startRow?(c==t.startColumn?o+=e[2]:o+=e[3],i(d,e[0]),o+=e[4]+He):(c==t.startColumn?o+=e[5]:o+=e[6],i(d,e[0]),o+=e[7]+He):(c==t.startColumn?s==t.startRow?o+=e[2]:o+=e[5]:s==t.startRow?o+=e[3]:o+=e[6],i(d,e[0]));for(var k=0,T=h;k<T.length;k++){var O=T[k];x[E]||(x[E]=""),((x[E]+O).length>d+1||"\n"==O)&&E++,x[E]||(x[E]=""),"\n"!=O&&(x[E]+=O)}r[c-t.startColumn]={cell:x,columnwidth:d}}for(var $=0,z=0,D=r;z<D.length;z++){var j=D[z];j.cell.length>$&&($=j.cell.length)}for(var L=0;L<$;L++){var M,N=Object(u["a"])(r);try{for(N.s();!(M=N.n()).done;){var V=M.value,B=Math.ceil(($-V.cell.length)/2),A="";L>=B&&V.cell[L-B]&&(A=V.cell[L-B]);var J=Math.ceil((V.columnwidth-A.length)/2);o+=e[1],i(J,e[11]),o+=A,i(V.columnwidth-J-A.length,e[11])}}catch(q){N.e(q)}finally{N.f()}o+=e[1]+He}if(s==t.endRow)for(var K=0;K<r.length;K++)0==K?(o+=e[8],i(r[K].columnwidth,e[12]),K==r.length-1&&(o+=e[10])):K==r.length-1?(o+=e[9],i(r[K].columnwidth,e[12]),o+=e[10]):(o+=e[9],i(r[K].columnwidth,e[12]))}return o}var Xe={generateTextTable:Ie},Ye={};function We(){localStorage.setItem("config",JSON.stringify(Ye))}function Ge(){var e=JSON.parse(localStorage.getItem("config"));e&&(Ye=e),et()}function Qe(e,t){Ye[e]=t,et()}function Ze(e){return Ye[e]}function et(){w.broadcast("configchanged",Ye)}function tt(e){w.on("configchanged",e),e(Ye)}Ge(),w.on("configchanged",We);var nt={set:Qe,get:Ze,save:We,load:Ge,changed:et,onchanged:tt},ot={data:function(){var e=["─│┌┬┐├┼┤└┴┘ ─","═║╔╦╗╠╬╣╚╩╝ ═","─║╓╥╖╟╫╢╙╨╜ ─","═│╒╤╕╞╪╡╘╧╛ ═","▀██████████ ▄","─│╭┬╮├┼┤╰┴╯ ─","─ ───────── ─"," ││││││││││  "];return{isShowed:!1,content:null,fontSize:10,useSelect:!1,borderTypes:e,selectedBorderType:e[0]}},watch:{selectedBorderType:function(){nt.set("selectedBorderType",this.selectedBorderType),this.update()},fontSize:function(){nt.set("fontSize",this.fontSize)},useSelect:function(){nt.set("useSelect",this.useSelect),this.update()}},methods:{update:function(){this.isShowed&&(this.content=Xe.generateTextTable(this.selectedBorderType,this.useSelect))},copy:function(){T(this.$refs.content),document.execCommand("copy")}},created:function(){var e=this;w.on("cellchanged",this.update),nt.onchanged((function(t){e.isShowed=t.isTextTableViewerShowed,t.selectedBorderType&&(e.selectedBorderType=t.selectedBorderType),t.fontSize&&(e.fontSize=t.fontSize),t.useSelect&&(e.useSelect=t.useSelect)}))}},it=ot,lt=(n("a404"),Object(be["a"])(it,Fe,Ue,!1,null,"7e8e06c0",null)),st=lt.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"overlay",staticClass:"overlay",class:{visible:e.value},on:{mousedown:e.closePopup}},[n("div",{staticClass:"overlay__popup"},[n(e.component,{tag:"component",attrs:{data:e.data},on:{close:function(t){return e.setVisibility(!1)}}})],1)])},ct=[],at={props:{value:{type:Boolean,required:!0}},data:function(){return{component:null,data:{}}},methods:{setVisibility:function(e){this.$emit("input",e)},closePopup:function(e){e.target==this.$refs.overlay&&this.setVisibility(!1)},openpopup:function(e){this.data=e.data,this.component=e.component,this.setVisibility(!0)}},created:function(){var e=this;w.on("openpopup",this.openpopup),w.on("closepopup",(function(){return e.setVisibility(!1)}))}},ut=at,dt=(n("7592"),Object(be["a"])(ut,rt,ct,!1,null,"c336e16a",null)),ht=dt.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"tools"},[n("div",{staticClass:"tools__container"},[n("DropdownButton",{attrs:{title:"Table",items:e.tabletab}}),n("DropdownButton",{attrs:{title:"Edit",items:e.edittab}}),n("DropdownButton",{attrs:{title:"Window",items:e.windowtab}})],1)])},mt=[],pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"button",staticClass:"dropdown-button",class:{opened:e.z__isOpened},on:{click:e.click}},[e._v(" "+e._s(e.title)+" "),n("ul",{ref:"dropdown",staticClass:"dropdown-button__dropdown"},e._l(e.items,(function(t,o){return n("li",{key:o,staticClass:"dropdown-button__row",class:{disabled:t.__isDisabled,delimiter:"delimiter"==t.type,default:!t.type||"default"==t.type||"checkbox"==t.type},on:{click:function(n){t.click(n),e.isOpened=!1}}},["checkbox"==t.type&&t.__isChecked?n("svg",{staticClass:"dropdown-button__icon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0",y:"0",width:"18px",height:"18px",viewBox:"0 0 18 18",preserveAspectRatio:"none"}},[n("g",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[n("polygon",{attrs:{fill:"#000000","fill-rule":"evenodd",points:"4.75 8.127 1.623 5 .561 6.061 4.75 10.25 13.75 1.25 12.689 .189",transform:"translate(2 4)"}})])]):e._e(),e._v(" "+e._s(t.label)+" ")])})),0)])},wt=[],vt={props:{items:{type:Array,required:!0},title:{type:String,required:!0}},data:function(){return{z__isOpened:!1}},computed:{isOpened:{get:function(){return this.z__isOpened},set:function(e){if(this.z__isOpened=e,this.z__isOpened){var t,n=Object(u["a"])(this.items);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.isDisabled&&(o.__isDisabled=o.isDisabled()),"checkbox"==o.type&&(o.__isChecked=o.isChecked())}}catch(i){n.e(i)}finally{n.f()}}}}},methods:{click:function(e){e.target==this.$refs.button&&(this.isOpened=!this.isOpened)},mousedown:function(e){var t=e.target;while(t!=this.$refs.dropdown&&t!=this.$refs.button&&t)t=t.parentElement;t||(this.isOpened=!1)}},created:function(){w.on("mousedown",this.mousedown)}},gt=vt,bt=(n("4dbd"),Object(be["a"])(gt,pt,wt,!1,null,"4e181128",null)),yt=bt.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popup-body"},[n("div",{staticClass:"popup-body__text"},[e._v("Columns:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columns,expression:"columns"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.columns},on:{input:function(t){t.target.composing||(e.columns=t.target.value)}}}),n("div",{staticClass:"popup-body__text",staticStyle:{"grid-row":"2"}},[e._v(" Rows: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rows,expression:"rows"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"2","grid-row":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.rows},on:{input:function(t){t.target.composing||(e.rows=t.target.value)}}}),n("div",{staticClass:"popup-body__text",staticStyle:{"grid-column":"3"}},[e._v("Column width:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columnwidth,expression:"columnwidth"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"4"},attrs:{type:"text"},domProps:{value:e.columnwidth},on:{input:function(t){t.target.composing||(e.columnwidth=t.target.value)}}}),n("div",{staticClass:"popup-body__text",staticStyle:{"grid-column":"3","grid-row":"2"}},[e._v(" Row height: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rowheight,expression:"rowheight"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"4","grid-row":"2"},attrs:{type:"text"},domProps:{value:e.rowheight},on:{input:function(t){t.target.composing||(e.rowheight=t.target.value)}}}),n("div",{staticClass:"popup-body__container"},[n("div",{staticClass:"button",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),n("div",{staticClass:"button green",on:{click:e.create}},[e._v(" Create ")])])])},Ct=[],St={data:function(){return{columns:10,rows:10,columnwidth:100,rowheight:20}},methods:{create:function(){for(var e={default:{row:{height:this.rowheight},column:{width:this.columnwidth}},rows:[],columns:[],cells:[]},t=0;t<this.rows;t++)e.rows.push(x(e.default.row));for(var n=0;n<this.columns;n++)e.columns.push(x(e.default.column));w.broadcast("tablechanged",{table:e}),this.$emit("close")}}},xt=St,Et=Object(be["a"])(xt,_t,Ct,!1,null,null,null),kt=Et.exports,Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popup-body"},[n("div",{staticClass:"popup-body__text"},[e._v("Columns:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columns,expression:"columns"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.columns},on:{input:function(t){t.target.composing||(e.columns=t.target.value)}}}),n("div",{staticClass:"popup-body__text",staticStyle:{"grid-row":"2"}},[e._v(" Rows: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rows,expression:"rows"}],staticClass:"popup-body__input",staticStyle:{"grid-column":"2","grid-row":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.rows},on:{input:function(t){t.target.composing||(e.rows=t.target.value)}}}),n("div",{staticClass:"popup-body__container"},[n("div",{staticClass:"button",staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),n("div",{staticClass:"button green",on:{click:e.change}},[e._v(" Change ")])])])},Ot=[],$t={data:function(){return{rows:P.rows.length,columns:P.columns.length}},methods:{change:function(){while(this.rows<P.rows.length)P.rows.pop();while(this.rows>P.rows.length)P.rows.push(x(P.default.row));while(this.columns<P.columns.length)P.columns.pop();while(this.columns>P.columns.length)P.columns.push(x(P.default.column));this.$emit("close")}}},zt=$t,Rt=Object(be["a"])(zt,Tt,Ot,!1,null,null,null),Dt=Rt.exports;function jt(){Mt("data:application/json,"+encodeURIComponent(JSON.stringify(P)),"table.json")}var Pt=document.createElement("input");function Lt(){Pt.click()}function Mt(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}Pt.type="file",Pt.onchange=function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=function(e){var t=JSON.parse(e.target.result);w.broadcast("tablechanged",{table:t})}};var Nt={save:jt,load:Lt},Vt={components:{DropdownButton:yt},data:function(){return{tabletab:[{label:"Create",click:function(){w.broadcast("openpopup",{component:kt})}},{label:"Open",click:function(){Nt.load()}},{label:"Save",click:function(){Nt.save()}},{label:"Change size",click:function(){w.broadcast("openpopup",{component:Dt})}},{type:"delimiter"},{label:"Add row after selected",click:function(){we.addRow(D.start.row+1)},isDisabled:this.isDisabled},{label:"Add row before selected",click:function(){we.addRow(D.start.row)},isDisabled:this.isDisabled},{label:"Delete selected row",click:function(){we.deleteRow(D.start.row)},isDisabled:this.isDisabled},{type:"delimiter"},{label:"Add column after selected",click:function(){we.addColumn(D.start.column+1)},isDisabled:this.isDisabled},{label:"Add column before selected",click:function(){we.addColumn(D.start.column)},isDisabled:this.isDisabled},{label:"Delete selected column",click:function(){we.deleteColumn(D.start.column)},isDisabled:this.isDisabled}],edittab:[{label:"Select all",click:function(){we.selectAll()}},{type:"delimiter"},{label:"Clear",click:function(){we.clearSelected()},isDisabled:this.isDisabled},{label:"Copy",click:function(){we.copy()},isDisabled:this.isDisabled},{label:"Paste",click:function(){we.paste()},isDisabled:this.isDisabled},{label:"Cut",click:function(){we.cut()},isDisabled:this.isDisabled}],windowtab:[{type:"checkbox",label:"Show text table preview",click:function(){nt.set("isTextTableViewerShowed",!nt.get("isTextTableViewerShowed"))},isChecked:function(){return nt.get("isTextTableViewerShowed")}}]}},methods:{isDisabled:function(){return!D.start}}},Bt=Vt,At=(n("40ae"),Object(be["a"])(Bt,ft,mt,!1,null,"2e63cba4",null)),Jt=At.exports,Kt={name:"App",components:{Table:qe,TextTableViewer:st,Popup:ht,Tools:Jt},data:function(){return{isOverlayVisible:!1,isTextTableViewerShowed:!1}},computed:{tableStyle:function(){var e=this.isTextTableViewerShowed?"calc(100% - 400px)":"100%";return{width:e}}},created:function(){var e=this;we.init(),nt.onchanged((function(t){return e.isTextTableViewerShowed=t.isTextTableViewerShowed}))},destroyed:function(){w.clear()}},qt=Kt,Ft=(n("5c0b"),Object(be["a"])(qt,i,l,!1,null,null,null)),Ut=Ft.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(Ut)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"6f67":function(e,t,n){},7592:function(e,t,n){"use strict";n("1a54")},"7b2d":function(e,t,n){},"9c0c":function(e,t,n){},a404:function(e,t,n){"use strict";n("e284")},c8ea:function(e,t,n){},e284:function(e,t,n){},e9f5:function(e,t,n){},ebd7:function(e,t,n){},fb0a:function(e,t,n){"use strict";n("4d8b")}});
//# sourceMappingURL=app.51cb9ae9.js.map