(function(e){function t(t){for(var o,s,l=t[0],c=t[1],a=t[2],d=0,h=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,a||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0055":function(e,t,n){},"0c71":function(e,t,n){"use strict";n("d491")},"1be2":function(e,t,n){"use strict";n("b153")},"270c":function(e,t,n){"use strict";n("0055")},"31d7":function(e,t,n){},4845:function(e,t,n){"use strict";n("ebd7")},"4baa":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Tools"),n("div",{staticClass:"container"},[n("Table",{style:e.tableStyle}),n("TextTableViewer",{attrs:{isShowed:e.isTextTableViewerShowed}})],1),n("Popup",{model:{value:e.isOverlayVisible,callback:function(t){e.isOverlayVisible=t},expression:"isOverlayVisible"}})],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"table",staticClass:"table"},[n("div",{staticClass:"table__free-space",on:{click:e.selectAll}}),n("div",{staticClass:"table__row-headers-wrapper"},[n("div",{ref:"row_headers_scroll",staticClass:"table__scroll table__scroll-withoutScrollbar table__row-headers-scroll"},[n("div",{staticClass:"table__row-headers"},e._l(e.table.rows,(function(e,t){return n("RowHeader",{key:t,attrs:{rowid:t}})})),1)])]),n("div",{ref:"column_headers",staticClass:"table__column-headers-wrapper"},[n("div",{ref:"column_headers_scroll",staticClass:"table__scroll table__scroll-withoutScrollbar"},[n("div",{staticClass:"table__column-headers"},e._l(e.table.columns,(function(e,t){return n("ColumnHeader",{key:t,attrs:{columnid:t}})})),1)])]),n("div",{ref:"table_viewer",staticClass:"table__scroll",on:{scroll:e.contentScroll}},[n("div",{staticClass:"table__content"},e._l(e.table.rows,(function(t,o){return n("CellRow",{key:o,attrs:{rowid:o,focused:e.focused}})})),1)])])},l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"rowheader",staticClass:"table__header row-header",on:{mousedown:e.mousedown,mousemove:e.mousemove}},[e._v(" "+e._s(e.rowid+1)+" "),n("div",{ref:"header_resizer",staticClass:"row-header__resizer",on:{mousedown:e.resizeStart}})])},a=[],u=(n("a9e3"),n("b85c")),d=(n("d3b7"),n("4de4"),n("159b"),{mouseup:[],mousemove:[],mousedown:[],keydown:[],touchstart:[],touchmove:[],touchend:[],copy:[],paste:[],cut:[],selectionchanged:[],rowsizechanged:[],columnsizechanged:[],cellchanged:[],tablechanged:[],textTableViewerShowedChanged:[],openpopup:[],closepopup:[]});function h(e,t){d[e]&&d[e].push(t)}function f(e,t){d[e].filter((function(e){return e!==t}))}function m(){for(var e in d)d[e]=[]}function v(e,t){d[e].forEach((function(e){return e&&e(t)}))}document.addEventListener("mousemove",(function(e){v("mousemove",e)})),document.addEventListener("mouseup",(function(e){v("mouseup",e)})),document.addEventListener("mousedown",(function(e){v("mousedown",e)})),document.addEventListener("keydown",(function(e){v("keydown",e)})),document.addEventListener("touchstart",(function(e){v("touchstart",e)})),document.addEventListener("touchmove",(function(e){v("touchmove",e)})),document.addEventListener("touchend",(function(e){v("touchend",e)})),document.addEventListener("copy",(function(e){v("copy",e)})),document.addEventListener("paste",(function(e){v("paste",e)})),document.addEventListener("cut",(function(e){v("cut",e)}));var w={on:h,off:f,clear:m,broadcast:v},p=(n("ac1f"),n("466d"),{37:1,38:1,39:1,40:1});function b(e){e.preventDefault()}function g(e){if(p[e.keyCode])return b(e),!1}var _=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){_=!0}}))}catch(zt){}var y=!!_&&{passive:!1},S="onwheel"in document.createElement("div")?"wheel":"mousewheel";function C(e){return String.fromCharCode(65+e)}function x(e){return JSON.parse(JSON.stringify(e))}function O(e){for(var t=[0],n=1;n<=e;n++){t[0]+=1;for(var o=0;o<t.length;o++)t[o]>25&&(t.length>o+1?t[o+1]+=1:t[o+1]=0,t[o]=0)}for(var i="",r=0,s=t;r<s.length;r++){var l=s[r];i=C(l)+i}return i}function E(e){return 1===e.length&&(e.match(/\d|\w|[а-яА-Я]/i)||-1!=["_","-","+","=","!","@","#","$","%","^","&","*","(",")","|","\\","[","]","{","}",",",".","?","`","~","'",'"',":",";","<",">"].indexOf(e))}function $(e,t){var n=document.createRange();n.selectNodeContents(e),t&&n.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(n)}function T(e){e.addEventListener("DOMMouseScroll",b,!1),e.addEventListener(S,b,y),e.addEventListener("touchmove",b,y),e.addEventListener("keydown",g,!1)}function z(e){e.removeEventListener("DOMMouseScroll",b,!1),e.removeEventListener(S,b,y),e.removeEventListener("touchmove",b,y),e.removeEventListener("keydown",g,!1)}function k(e,t){while(-1==t.indexOf(e)&&e)e=e.parentElement;return!!e}var j=[],L={},D=!1,M={default:{row:{height:20},column:{width:100}},rows:[],columns:[],cells:[]},P=-1,V=-1,R=-1,N=-1,K=null;function B(){w.on("tablechanged",A),w.on("mousemove",I),w.on("touchmove",I),w.on("mouseup",W),w.on("touchend",W),w.on("touchmove",Z),w.on("copy",le),w.on("paste",de),w.on("cut",fe);for(var e=0;e<50;e++)M.rows.push(x(M.default.row));for(var t=0;t<50;t++)M.columns.push(x(M.default.column))}function J(e){K=e}function q(){return K}function A(e){M.default=e.table.default,M.rows=e.table.rows,M.columns=e.table.columns,M.cells=e.table.cells;for(var t=0;t<M.rows.length;t++)w.broadcast("rowsizechanged",{row:t,value:M.rows[t].height});for(var n=0;n<M.columns.length;n++)w.broadcast("columnsizechanged",{column:n,value:M.columns[n].width})}function U(){var e,t=Object(u["a"])(ne());try{for(t.s();!(e=t.n()).done;){var n=e.value;F(n.row,n.column,{content:null})}}catch(o){t.e(o)}finally{t.f()}}function F(e,t,n){M.cells[e][t]=n,w.broadcast("cellchanged",{row:e,column:t,value:n})}function H(e,t){return M.cells[e]&&M.cells[e][t]||(M.cells[e]||(M.cells[e]=[]),M.cells[e][t]={content:null}),M.cells[e][t]}function X(e,t){P=e,V=t.target.parentElement.getBoundingClientRect().top}function Y(e,t){R=e,N=t.target.parentElement.getBoundingClientRect().left}function I(e){if(-1!=P){var t=(e.clientY?e.clientY:e.touches[0].clientY)-V;t>5&&(M.rows[P].height=t),w.broadcast("rowsizechanged",{row:P,value:t})}if(-1!=R){var n=(e.clientX?e.clientX:e.touches[0].clientX)-N;n>5&&(M.columns[R].width=n),w.broadcast("columnsizechanged",{column:R,value:n})}}function W(e){P=-1,R=-1,D=!1}function G(e){if(-1==P&&-1==R){if(e.ev.shiftKey)return e.move=!0,void Q(e);D=!0,e.ev.ctrlKey||e.ev.shiftKey||ee(),j.push({row:e.row,column:e.column}),e.index=j.length,L.start=e,w.broadcast("selectionchanged",null)}}function Q(e){if(D||e.move){L.end=e;var t=Math.min(L.start.row,e.row),n=Math.max(L.start.row,e.row),o=Math.min(L.start.column,e.column),i=Math.max(L.start.column,e.column);ee(L.start.index),t==n&&0==o&&i==M.columns.length-1?j.push({row:t}):o==i&&0==t&&n==M.rows.length-1?j.push({column:o}):j.push({startRow:t,endRow:n,startColumn:o,endColumn:i}),w.broadcast("selectionchanged",null)}}function Z(e){var t=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);t&&D&&(t=t.__vue__,t&&("Cell"==t.$options._componentTag?Q({row:t.rowid,column:t.columnid,ev:e}):"RowHeader"==t.$options._componentTag?Q({row:t.rowid,column:M.columns.length-1,ev:e}):"ColumnHeader"==t.$options._componentTag&&Q({row:M.rows.length-1,column:t.columnid,ev:e})))}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];while(j.length>e)j.pop();1==t&&w.broadcast("selectionchanged",null)}function te(){ee(),G({row:0,column:0,ev:{}}),j.push(null),D=!1,w.broadcast("selectionchanged",null)}function ne(){var e,t=L.start,n=[],o=Object(u["a"])(j);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(null==i){for(var r=0;r<M.rows.length;r++)for(var s=0;s<M.columns.length;s++)n.push({row:r,column:s});break}if(void 0==i.column&&i.row==t.row)for(var l=0;l<M.columns.length;l++)n.push({row:t.row,column:l});else if(void 0==i.row&&i.column==t.column)for(var c=0;c<M.rows.length;c++)n.push({row:c,column:t.column});else if(void 0!=i.row&&void 0!=i.column)n.push({row:i.row,column:i.column});else for(var a=i.startRow;a<=i.endRow;a++)for(var d=i.startColumn;d<=i.endColumn;d++)n.push({row:a,column:d})}}catch(h){o.e(h)}finally{o.f()}return n}var oe={value:null,__value:null};function ie(e,t,n,o){M.cells[t][n]&&o.cells.push({row:t-e.row,column:n-e.column,cell:M.cells[t][n]})}function re(){var e,t={cells:[]},n=L.start,o=Object(u["a"])(ne());try{for(o.s();!(e=o.n()).done;){var i=e.value;ie(n,i.row,i.column,t)}}catch(r){o.e(r)}finally{o.f()}return t}function se(){oe.value=JSON.stringify(re())}function le(e){e.preventDefault(),e.clipboardData.setData("text/plain",JSON.stringify(re()))}function ce(e,t,n,o){while(M.rows.length<=e.row+t)M.rows.push(x(M.default.row));while(M.columns.length<=e.column+n)M.columns.push(x(M.default.column));M.cells[e.row+t]||(M.cells[e.row+t]=[]),F(e.row+t,e.column+n,o),j.push({row:e.row+t,column:e.column+n})}function ae(e){if(L.start&&e&&e.cells){ee(0);var t,n=Object(u["a"])(e.cells);try{for(n.s();!(t=n.n()).done;){var o=t.value;ce(L.start,o.row,o.column,o.cell)}}catch(i){n.e(i)}finally{n.f()}w.broadcast("selectionchanged",null)}}function ue(){oe.value.then((function(e){ae(JSON.parse(e))}))}function de(e){e.preventDefault(),ae(JSON.parse(e.clipboardData.getData("text/plain")))}function he(){se(),U()}function fe(e){le(e),U()}navigator.clipboard?Object.defineProperty(oe,"value",{get:function(){return navigator.clipboard.readText()},set:function(e){navigator.clipboard.writeText(e).then(null,(function(){console.log("clipboard write failed")}))}}):Object.defineProperty(oe,"value",{get:function(){return new Promise((function(e,t){return e(oe.__value)}))},set:function(e){oe.__value=e}});var me={setViewer:J,getViewer:q,init:B,clearSelected:U,getCell:H,setCell:F,rowResizeStart:X,columnResizeStart:Y,resizeMove:I,resizeEnd:W,selectionStart:G,selectionMove:Q,clearSelection:ee,selectAll:te,getSelectedCells:ne,copy:se,paste:ue,cut:he},ve={props:{rowid:{type:Number,required:!0}},methods:{mousedown:function(e){me.selectionStart({row:this.rowid,column:e.shiftKey?M.columns.length-1:0,ev:e}),me.selectionMove({row:this.rowid,column:M.columns.length-1,ev:e})},mousemove:function(e){me.selectionMove({row:this.rowid,column:M.columns.length-1,ev:e})},resizeStart:function(e){me.rowResizeStart(this.rowid,e)},rowsizechanged:function(e){e.row==this.rowid&&this.$refs.rowheader&&(this.$refs.rowheader.style.height=e.value+"px")}},created:function(){w.on("rowsizechanged",this.rowsizechanged)},mounted:function(){this.rowsizechanged({row:this.rowid,value:M.rows[this.rowid].height}),this.$refs.rowheader.addEventListener("touchstart",this.mousedown),this.$refs.header_resizer.addEventListener("touchstart",this.resizeStart)}},we=ve,pe=(n("4845"),n("2877")),be=Object(pe["a"])(we,c,a,!1,null,"144af70f",null),ge=be.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"columnheader",staticClass:"table__header column-header",on:{mousedown:e.mousedown,mousemove:e.mousemove}},[e._v(" "+e._s(e.numToLetters(e.columnid))+" "),n("div",{ref:"header_resizer",staticClass:"column-header__resizer",on:{mousedown:e.resizeStart}})])},ye=[],Se={props:{columnid:{type:Number,required:!0}},methods:{numToLetters:O,mousedown:function(e){me.selectionStart({row:e.shiftKey?M.rows.length-1:0,column:this.columnid,ev:e}),me.selectionMove({row:M.rows.length-1,column:this.columnid,ev:e})},mousemove:function(e){me.selectionMove({row:M.rows.length-1,column:this.columnid,ev:e})},resizeStart:function(e){me.columnResizeStart(this.columnid,e)},columnsizechanged:function(e){e.column==this.columnid&&this.$refs.columnheader&&(this.$refs.columnheader.style.width=e.value+"px")}},created:function(){w.on("columnsizechanged",this.columnsizechanged)},mounted:function(){this.columnsizechanged({column:this.columnid,value:M.columns[this.columnid].width}),this.$refs.columnheader.addEventListener("touchstart",this.mousedown),this.$refs.header_resizer.addEventListener("touchstart",this.resizeStart)}},Ce=Se,xe=(n("270c"),Object(pe["a"])(Ce,_e,ye,!1,null,"169104c3",null)),Oe=xe.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"cellrow",staticClass:"wrapper"},e._l(e.table.columns,(function(t,o){return n("div",{key:o,staticClass:"cellrow"},[n("Cell",{attrs:{rowid:e.rowid,columnid:o,focused:e.focused}})],1)})),0)},$e=[],Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"editor",staticClass:"cell",class:{"cell-editing":e.isEditing},attrs:{contenteditable:e.isEditing,autofocus:""},domProps:{textContent:e._s(e.content)},on:{keydown:e.onKeyPress,blur:e.onUnfocus,dblclick:function(t){return e.onFocus(!1)},mousedown:e.onMouseDown,mousemove:e.onMouseMove}})},ze=[],ke={props:{rowid:{type:Number,required:!0},columnid:{type:Number,required:!0},focused:{type:Boolean,required:!0}},data:function(){return{isEditing:!1,content:null,isTouchEnd:!1}},methods:{onMouseDown:function(e){this.isEditing||me.selectionStart({row:this.rowid,column:this.columnid,ev:e})},onMouseMove:function(e){me.selectionMove({row:this.rowid,column:this.columnid,ev:e})},onTouchStart:function(e){var t=this;this.isTouchEnd=!1;var n={top:me.getViewer().scrollTop,left:me.getViewer().scrollLeft};setTimeout((function(){var o=me.getViewer().scrollTop,i=me.getViewer().scrollLeft;1!=t.isTouchEnd&&n.top+10>=o&&n.top-10<=o&&n.left+10>=i&&n.left-10<=i&&(T(me.getViewer()),t.onMouseDown(e))}),500)},onTouchEnd:function(e){this.isTouchEnd=!0,z(me.getViewer())},onFocus:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isEditing=!0,j.unshift({row:this.rowid,column:this.columnid}),me.clearSelection(1,!0),setTimeout((function(){e.$refs.editor.focus(),$(e.$refs.editor,t)}),10)},onUnfocus:function(e){this.updateContent(),this.isEditing=!1},onKeyPress:function(e){if("Enter"===e.code&&!e.shiftKey)return e.preventDefault(),this.updateContent(),void(this.isEditing=!1)},getCell:function(){return me.getCell(this.rowid,this.columnid)},globalKeyPress:function(e){this.focused&&!e.ctrlKey&&E(e.key)&&!this.isEditing&&this.isSelected(this.rowid,this.columnid)&&this.isStartCell()&&(this.content=this.content?this.content+e.key:e.key,this.onFocus(!0))},updateContent:function(){this.content=this.$refs.editor.innerText,this.getCell().content=this.content,w.broadcast("cellchanged",{})},isStartCell:function(){return L.start.row==this.rowid&&L.start.column==this.columnid},isSelected:function(e,t){if(e<0||e>=M.rows.length||t<0||t>=M.columns.length)return!1;var n,o=Object(u["a"])(j);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(null==i)return!0;if(void 0==i.column&&i.row==e)return!0;if(void 0==i.row&&i.column==t)return!0;if(i.row==e&&i.column==t)return!0;if(i.startColumn<=t&&i.endColumn>=t&&i.startRow<=e&&i.endRow>=e)return!0}}catch(r){o.e(r)}finally{o.f()}return!1},onSelectionSelectionChanged:function(){if(this.$refs.editor){if(!this.isSelected(this.rowid,this.columnid))return this.$refs.editor.style.border=null,this.$refs.editor.style.boxSizing=null,void(this.$refs.editor.style.background=null);this.$refs.editor.style.boxSizing="border-box";var e="2px solid green";this.isSelected(this.rowid-1,this.columnid)?this.$refs.editor.style.borderTop=null:this.$refs.editor.style.borderTop=e,this.isSelected(this.rowid,this.columnid+1)?this.$refs.editor.style.borderRight=null:this.$refs.editor.style.borderRight=e,this.isSelected(this.rowid+1,this.columnid)?this.$refs.editor.style.borderBottom=null:this.$refs.editor.style.borderBottom=e,this.isSelected(this.rowid,this.columnid-1)?this.$refs.editor.style.borderLeft=null:this.$refs.editor.style.borderLeft=e,this.isStartCell()?this.$refs.editor.style.background=null:this.$refs.editor.style.background="lightgrey"}},columnsizechanged:function(e){e.column==this.columnid&&this.$refs.editor&&(this.$refs.editor.style.width=e.value+"px")},cellchanged:function(e){e.row==this.rowid&&e.column==this.columnid&&(this.content=e.value.content)},tablechanged:function(e){this.content=this.getCell().content}},created:function(){w.on("columnsizechanged",this.columnsizechanged),w.on("keydown",this.globalKeyPress),w.on("selectionchanged",this.onSelectionSelectionChanged),w.on("cellchanged",this.cellchanged),w.on("tablechanged",this.tablechanged)},mounted:function(){this.columnsizechanged({column:this.columnid,value:M.columns[this.columnid].width}),this.content=this.getCell().content,this.onSelectionSelectionChanged(),this.$refs.editor.addEventListener("touchstart",this.onTouchStart),this.$refs.editor.addEventListener("touchend",this.onTouchEnd)}},je=ke,Le=(n("1be2"),Object(pe["a"])(je,Te,ze,!1,null,"b8ea28c4",null)),De=Le.exports,Me={components:{Cell:De},props:{rowid:{type:Number,required:!0},focused:{type:Boolean,required:!0}},data:function(){return{table:M}},methods:{rowsizechanged:function(e){e.row==this.rowid&&this.$refs.cellrow&&(this.$refs.cellrow.style.height=e.value+"px")}},created:function(){w.on("rowsizechanged",this.rowsizechanged)},mounted:function(){this.rowsizechanged({row:this.rowid,value:M.rows[this.rowid].height})}},Pe=Me,Ve=(n("e1ed"),Object(pe["a"])(Pe,Ee,$e,!1,null,"159fb674",null)),Re=Ve.exports,Ne={components:{RowHeader:ge,ColumnHeader:Oe,CellRow:Re},data:function(){return{clipboard:{},focused:!0,table:M}},methods:{selectAll:me.selectAll,contentScroll:function(e){this.$refs.column_headers_scroll.scrollTo(e.target.scrollLeft,0),this.$refs.row_headers_scroll.scrollTo(0,e.target.scrollTop)},keyPress:function(e){this.focused&&(e.ctrlKey&&"KeyA"==e.code?me.selectAll():"Delete"==e.code&&me.clearSelected())},globalMouseUp:function(e){this.focused=k(e.target,[this.$refs.table])}},created:function(){w.on("keydown",this.keyPress),w.on("mouseup",this.globalMouseUp)},mounted:function(){T(this.$refs.column_headers_scroll),T(this.$refs.row_headers_scroll),me.setViewer(this.$refs.table_viewer)}},Ke=Ne,Be=(n("f0c9"),Object(pe["a"])(Ke,s,l,!1,null,"10a58b73",null)),Je=Be.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowed,expression:"isShowed"}],staticClass:"texttable"},[n("div",{staticClass:"texttable__wrapper",style:{"font-size":e.fontSize+"px"}},[n("div",{staticClass:"texttable__content"},[e._v(e._s(e.content))])]),n("div",{staticClass:"texttable__container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.fontSize,expression:"fontSize"}],attrs:{type:"range",min:"1",max:"20"},domProps:{value:e.fontSize},on:{__r:function(t){e.fontSize=t.target.value}}}),n("div",{staticClass:"texttable__button button",on:{click:e.update}},[e._v("Update table")])])])},Ae=[];function Ue(){for(var e="",t=0;t<M.rows.length;t++){M.rows[t];for(var n=[],o=0;o<M.columns.length;o++){var i=M.columns[o],r=i.width/6.5,s=[],l=me.getCell(t,o);if(l.content){for(var c=[],a=0,d=0;d<l.content.length;d++){var h=l.content[d];c[a]||(c[a]="")," "==h||"\n"==h?c[a++]+=h:c[a]+=h}for(var f=0,m=0;m<c.length;m++){var v=c[m];if(v.length>r||-1!=v.indexOf("\n")){s[f]||(s[f]=""),-1!=v.indexOf("\n")&&(s[f]+v).length>r&&f++;var w,p=Object(u["a"])(v);try{for(p.s();!(w=p.n()).done;){var b=w.value;"\n"==b&&(s[++f]="\n",f++),s[f]||(s[f]=""),s[f].length>r&&f++,s[f]||(s[f]=""),"\n"!=b&&(s[f]+=b)}}catch(q){p.e(q)}finally{p.f()}}else s[f]||(s[f]=""),(s[f]+v).length>r&&f++,s[f]||(s[f]=""),s[f]+=v}}var g=[],_=0;if(o==M.columns.length-1)if(0==t){e+="┬";for(var y=0;y<r;y++)e+="─";e+="┐\r\n"}else if(t==M.rows.length-1){e+="┴";for(var S=0;S<r;S++)e+="─";e+="┘"}else{e+="┼";for(var C=0;C<r;C++)e+="─";e+="┤\r\n"}else{0==o?0==t?e+="┌":t==M.rows.length-1?e+="└":e+="├":0==t?e+="┬":t==M.rows.length-1?e+="┴":e+="┼";for(var x=0;x<r;x++)e+="─"}for(var O=0,E=s;O<E.length;O++){var $=E[O];g[_]||(g[_]=""),((g[_]+$).length>r+1||"\n"==$)&&_++,g[_]||(g[_]=""),"\n"!=$&&(g[_]+=$)}n[o]={cell:g,columnwidth:r}}if(t==M.rows.length-1)break;for(var T=0,z=0,k=n;z<k.length;z++){var j=k[z];j.cell.length>T&&(T=j.cell.length)}for(var L=0;L<T;L++){var D,P=Object(u["a"])(n);try{for(P.s();!(D=P.n()).done;){var V=D.value,R=Math.ceil((T-V.cell.length)/2),N="";L>=R&&V.cell[L-R]&&(N=V.cell[L-R]);var K=Math.ceil((V.columnwidth-N.length)/2);e+="│";for(var B=0;B<K;B++)e+=" ";e+=N;for(var J=0;J<V.columnwidth-K-N.length;J++)e+=" "}}catch(q){P.e(q)}finally{P.f()}e+="│\r\n"}}return e}var Fe={generateTextTable:Ue},He={props:{isShowed:{type:Boolean,required:!0}},data:function(){return{content:null,fontSize:10}},methods:{update:function(){this.isShowed&&(this.content=Fe.generateTextTable())}},created:function(){w.on("cellchanged",this.update)}},Xe=He,Ye=(n("0c71"),Object(pe["a"])(Xe,qe,Ae,!1,null,"78c5e03e",null)),Ie=Ye.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"overlay",staticClass:"overlay",class:{visible:e.value},on:{mousedown:e.closePopup}},[n("div",{staticClass:"overlay__popup"},[n(e.component,{tag:"component"})],1)])},Ge=[],Qe={props:{value:{type:Boolean,required:!0}},data:function(){return{component:null}},methods:{setVisibility:function(e){this.$emit("input",e)},closePopup:function(e){e.target==this.$refs.overlay&&this.setVisibility(!1)},openpopup:function(e){this.component=e.component,this.setVisibility(!0)}},created:function(){var e=this;w.on("openpopup",this.openpopup),w.on("closepopup",(function(){return e.setVisibility(!1)}))}},Ze=Qe,et=(n("a95a"),Object(pe["a"])(Ze,We,Ge,!1,null,"bf575ed0",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"tools"},[n("div",{staticClass:"tools__container"},[n("DropdownButton",{attrs:{title:"Table",items:e.tabletab}}),n("DropdownButton",{attrs:{title:"Edit",items:e.edittab}}),n("DropdownButton",{attrs:{title:"Window",items:e.windowtab}})],1)])},ot=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"button",staticClass:"dropdown-button",class:{opened:e.z__isOpened},on:{click:e.click}},[e._v(" "+e._s(e.title)+" "),n("ul",{ref:"dropdown",staticClass:"dropdown-button__dropdown"},e._l(e.items,(function(t,o){return n("li",{key:o,staticClass:"dropdown-button__row",class:{disabled:t.__isDisabled},on:{click:function(n){t.click(n),e.isOpened=!1}}},[e._v(" "+e._s(t.label)+" ")])})),0)])},rt=[],st={props:{items:{type:Array,required:!0},title:{type:String,required:!0}},data:function(){return{z__isOpened:!1}},computed:{isOpened:{get:function(){return this.z__isOpened},set:function(e){if(this.z__isOpened=e,this.z__isOpened){var t,n=Object(u["a"])(this.items);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.isDisabled&&(o.__isDisabled=o.isDisabled())}}catch(i){n.e(i)}finally{n.f()}}}}},methods:{click:function(e){e.target==this.$refs.button&&(this.isOpened=!this.isOpened)},mousedown:function(e){var t=e.target;while(t!=this.$refs.dropdown&&t!=this.$refs.button&&t)t=t.parentElement;t||(this.isOpened=!1)}},created:function(){w.on("mousedown",this.mousedown)}},lt=st,ct=(n("9878"),Object(pe["a"])(lt,it,rt,!1,null,"6047509a",null)),at=ct.exports,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createtable"},[n("div",{staticClass:"createtable__text"},[e._v("Columns:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columns,expression:"columns"}],staticClass:"createtable__input",staticStyle:{"grid-column":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.columns},on:{input:function(t){t.target.composing||(e.columns=t.target.value)}}}),n("div",{staticClass:"createtable__text",staticStyle:{"grid-row":"2"}},[e._v(" Rows: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rows,expression:"rows"}],staticClass:"createtable__input",staticStyle:{"grid-column":"2","grid-row":"2","margin-right":"10px"},attrs:{type:"text"},domProps:{value:e.rows},on:{input:function(t){t.target.composing||(e.rows=t.target.value)}}}),n("div",{staticClass:"createtable__text",staticStyle:{"grid-column":"3"}},[e._v("Column width:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.columnwidth,expression:"columnwidth"}],staticClass:"createtable__input",staticStyle:{"grid-column":"4"},attrs:{type:"text"},domProps:{value:e.columnwidth},on:{input:function(t){t.target.composing||(e.columnwidth=t.target.value)}}}),n("div",{staticClass:"createtable__text",staticStyle:{"grid-column":"3","grid-row":"2"}},[e._v(" Row height: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rowheight,expression:"rowheight"}],staticClass:"createtable__input",staticStyle:{"grid-column":"4","grid-row":"2"},attrs:{type:"text"},domProps:{value:e.rowheight},on:{input:function(t){t.target.composing||(e.rowheight=t.target.value)}}}),n("div",{staticClass:"createtable__container"},[n("div",{staticClass:"button",staticStyle:{"margin-right":"10px"},on:{click:e.close}},[e._v(" Cancel ")]),n("div",{staticClass:"button green",on:{click:e.create}},[e._v(" Create ")])])])},dt=[],ht={data:function(){return{columns:10,rows:10,columnwidth:100,rowheight:20}},methods:{close:function(){w.broadcast("closepopup",null)},copyObject:function(e){return JSON.parse(JSON.stringify(e))},create:function(){for(var e={default:{row:{height:this.rowheight},column:{width:this.columnwidth}},rows:[],columns:[],cells:[]},t=0;t<this.rows;t++)e.rows.push(this.copyObject(e.default.row));for(var n=0;n<this.columns;n++)e.columns.push(this.copyObject(e.default.column));w.broadcast("tablechanged",{table:e}),w.broadcast("closepopup",null)}}},ft=ht,mt=(n("6d17"),Object(pe["a"])(ft,ut,dt,!1,null,"38ac3272",null)),vt=mt.exports;function wt(){gt("data:application/json,"+encodeURIComponent(JSON.stringify(M)),"table.json")}var pt=document.createElement("input");function bt(){pt.click()}function gt(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}pt.type="file",pt.onchange=function(e){var t=e.target.files[0],n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=function(e){var t=JSON.parse(e.target.result);w.broadcast("tablechanged",{table:t})}};var _t={save:wt,load:bt},yt={components:{DropdownButton:at},data:function(){return{tabletab:[{label:"Create",click:function(){w.broadcast("openpopup",{component:vt})}},{label:"Open",click:function(){_t.load()}},{label:"Save",click:function(){_t.save()}}],edittab:[{label:"Select all",click:function(){me.selectAll()}},{label:"Clear",click:function(){me.clearSelected()},isDisabled:this.isDisabled},{label:"Copy",click:function(){me.copy()},isDisabled:this.isDisabled},{label:"Paste",click:function(){me.paste()},isDisabled:this.isDisabled},{label:"Cut",click:function(){me.cut()},isDisabled:this.isDisabled}],windowtab:[{label:"Show text table preview",click:function(){w.broadcast("textTableViewerShowedChanged",null)}}]}},methods:{isDisabled:function(){return!L.start}}},St=yt,Ct=(n("f1b5"),Object(pe["a"])(St,nt,ot,!1,null,"4ba20d52",null)),xt=Ct.exports,Ot={name:"App",components:{Table:Je,TextTableViewer:Ie,Popup:tt,Tools:xt},data:function(){return{isOverlayVisible:!1,isTextTableViewerShowed:!1}},computed:{tableStyle:function(){var e=this.isTextTableViewerShowed?"calc(100% - 400px)":"100%";return{width:e}}},created:function(){var e=this;w.on("textTableViewerShowedChanged",(function(){return e.isTextTableViewerShowed=!e.isTextTableViewerShowed})),me.init()},destroyed:function(){w.clear()}},Et=Ot,$t=(n("5c0b"),Object(pe["a"])(Et,i,r,!1,null,null,null)),Tt=$t.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(Tt)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"6d17":function(e,t,n){"use strict";n("e8930")},9878:function(e,t,n){"use strict";n("e4c6")},"9c0c":function(e,t,n){},a95a:function(e,t,n){"use strict";n("31d7")},b153:function(e,t,n){},d491:function(e,t,n){},d73c:function(e,t,n){},e1ed:function(e,t,n){"use strict";n("d73c")},e4c6:function(e,t,n){},e8930:function(e,t,n){},e900:function(e,t,n){},ebd7:function(e,t,n){},f0c9:function(e,t,n){"use strict";n("e900")},f1b5:function(e,t,n){"use strict";n("4baa")}});
//# sourceMappingURL=app.248b8437.js.map